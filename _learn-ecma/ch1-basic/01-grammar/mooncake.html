<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>抢月饼</title>
</head>

<body>

  <main>
    <button id="mooncake_btn" class="cs-btn">点我抢月饼</button>
    <p id="res"></p>
  </main>
  <aside>

  </aside>
  <script>
    //定义在某一时间点击事件，每秒点击10次
    var time1 = setInterval(setTimeClick, 100);

    // var btn = document.querySelector(".button-hook");
    var btn = document.getElementById("mooncake_btn");

    function setTimeClick() {
      //设定十二点整开始点击
      var setTime = 215300; // 3600 * 12

      // 获取当前时间
      var now = new Date();
      var hours = now.getHours().toString();
      var minutes = now.getMinutes().toString();
      var seconds = now.getSeconds().toString();

      // 获取当前时间
      if (hours.length == 1) {
        hours = "0" + hours;
      }
      if (minutes.length == 1) {
        minutes = "0" + minutes;
      }
      if (seconds.length == 1) {
        seconds = "0" + seconds;
      }
      var date = hours + minutes + seconds; // date也是字符串类型

      //当前时间到达设定时间的时候触发点击事件
      // if (date == setTime) { btn.click(); }
      console.log('持续监控')
      btn.click();
    }

    btn.addEventListener("click", function() {
      // document.getElementById('res').html('抢到月饼了')
      console.log('抢到月饼了')
      clearInterval(time1)
    });
  </script>
</body>

</html>
